<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request Support - MEMBRO</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="data.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon"><img src="logo.png" alt="MEMBRO Logo"></div>
                    <div class="logo-text">
                        <h1>MEMBRO</h1>
                        <span>Your Home Portal</span>
                    </div>
                </div>
                <div class="user-info">
                    <div class="user-details">
                        <span class="user-name">Heriberto Nathan</span>
                        <span class="user-unit">Unit 802</span>
                    </div>
                    <button class="notification-btn" onclick="toggleNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">5</span>
                    </button>
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <button class="menu-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <!-- Notification Modal -->
                    <div class="notification-modal" id="notificationModal">
            <div class="notification-overlay" onclick="closeNotifications()"></div>
            <div class="notification-panel">
                <div class="notification-header">
                    <h3>Notifications</h3>
                    <button class="close-btn" onclick="closeNotifications()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="notification-tabs">
                    <button class="tab-btn active" onclick="switchTab('all')">View all</button>
                    <button class="tab-btn" onclick="switchTab('mentions')">Mentions</button>
                </div>
                
                <div class="notification-content">
                    <div class="notification-item unread" data-type="comment">
                        <div class="notification-avatar">
                            <img src="https://ui-avatars.com/api/?name=Frankie+Sullivan&background=3b82f6&color=ffffff&size=40" alt="Frankie Sullivan">
                        </div>
                        <div class="notification-body">
                            <div class="notification-text">
                                <strong>Frankie Sullivan</strong> commented on your post
                            </div>
                            <div class="notification-preview">
                                This is looking great! Let's get started on it.
                            </div>
                            <div class="notification-time">Friday 2:20pm</div>
                        </div>
                        <div class="notification-date">Sep 20, 2024</div>
                        <div class="unread-indicator"></div>
                    </div>
                    
                    <div class="notification-item unread" data-type="follow">
                        <div class="notification-avatar">
                            <img src="https://ui-avatars.com/api/?name=Amelie+Laurent&background=10b981&color=ffffff&size=40" alt="Amelie Laurent">
                        </div>
                        <div class="notification-body">
                            <div class="notification-text">
                                <strong>Amelie Laurent</strong> followed you
                            </div>
                            <div class="notification-time">Friday 10:04am</div>
                        </div>
                        <div class="notification-date">Sep 20, 2024</div>
                        <div class="unread-indicator"></div>
                    </div>
                    
                    <div class="notification-item unread" data-type="upload">
                        <div class="notification-avatar">
                            <img src="https://ui-avatars.com/api/?name=Mikah+DiStefano&background=f59e0b&color=ffffff&size=40" alt="Mikah DiStefano">
                        </div>
                        <div class="notification-body">
                            <div class="notification-text">
                                <strong>Mikah DiStefano</strong> uploaded 2 attachments
                            </div>
                            <div class="notification-attachments">
                                <div class="attachment-item">
                                    <i class="fas fa-file-video"></i>
                                    <div class="attachment-info">
                                        <span class="attachment-name">Prototype recording 02.mp4</span>
                                        <span class="attachment-size">16 MB</span>
                                    </div>
                                    <i class="fas fa-download attachment-action"></i>
                                </div>
                                <div class="attachment-item">
                                    <i class="fas fa-file-video"></i>
                                    <div class="attachment-info">
                                        <span class="attachment-name">Prototype recording 01.mp4</span>
                                        <span class="attachment-size">14 MB</span>
                                    </div>
                                    <i class="fas fa-download attachment-action"></i>
                                </div>
                            </div>
                            <div class="notification-time">Thursday 2:20pm</div>
                        </div>
                        <div class="notification-date">Sep 20, 2024</div>
                        <div class="unread-indicator"></div>
                    </div>
                    
                    <div class="notification-item" data-type="billing">
                        <div class="notification-avatar">
                            <div class="system-avatar">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                        </div>
                        <div class="notification-body">
                            <div class="notification-text">
                                <strong>Payment Reminder</strong>
                            </div>
                            <div class="notification-preview">
                                Your monthly payment of ₱1,250 is due on March 15th
                            </div>
                            <div class="notification-time">2 hours ago</div>
                        </div>
                        <div class="notification-date">Today</div>
                    </div>
                    
                    <div class="notification-item" data-type="maintenance">
                        <div class="notification-avatar">
                            <div class="system-avatar" style="background: var(--warning);">
                                <i class="fas fa-wrench"></i>
                            </div>
                        </div>
                        <div class="notification-body">
                            <div class="notification-text">
                                <strong>Maintenance Update</strong>
                            </div>
                            <div class="notification-preview">
                                Your service request #2024-156 has been completed
                            </div>
                            <div class="notification-time">Yesterday</div>
                        </div>
                        <div class="notification-date">Sep 19, 2024</div>
                    </div>
                </div>
                
                <div class="notification-footer">
                    <button class="mark-read-btn" onclick="markAllAsRead()">
                        <i class="fas fa-check-double"></i>
                        Mark all as read
                    </button>
                    <button class="view-all-btn" onclick="viewAllNotifications()">
                        View all notifications
                    </button>
                    <a href="notification-settings.html" class="unsubscribe-link">
                        <i class="fas fa-cog"></i>
                        Notification Settings
                    </a>
                </div>
            </div>
        </div>
                </div>
            </div>
        </header>

         <!-- Desktop Sidebar -->
         <nav class="sidebar">
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="dashboard.html" class="nav-link">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="announcements.html" class="nav-link">
                        <i class="fas fa-bullhorn"></i>
                        <span>Community News</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="profile.html" class="nav-link">
                        <i class="fas fa-user"></i>
                        <span>My Information</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="properties.html" class="nav-link">
                        <i class="fas fa-key"></i>
                        <span>My Properties</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="household.html" class="nav-link">
                        <i class="fas fa-users"></i>
                        <span>My Household</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="billing.html" class="nav-link">
                        <i class="fas fa-credit-card"></i>
                        <span>Bills & Payments</span>
                    </a>
                </li>
              
                <li class="nav-item">
                    <a href="services.html" class="nav-link">
                        <i class="fa fa-calendar"></i>
                        <span>Book Services/Facilities</span>
                    </a>
                </li>
               
                
                <li class="nav-item active">
                    <a href="complaints.html" class="nav-link">
                        <i class="fas fa-tools"></i>
                        <span>Request Support</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Page Header -->
            <div class="page-header">
                <h2>Request Support</h2>
                <p>Submit maintenance requests and track their progress</p>
            </div>

            <!-- Emergency Contact -->
            <div class="card" style="border-left: 4px solid var(--danger);">
                <div class="card-header" style="background: #fef2f2; color: var(--danger);">
                    <i class="fas fa-exclamation-triangle"></i>
                    Emergency Assistance
                </div>
                <div class="card-body">
                    <p style="color: var(--gray-600); margin-bottom: 1.5rem; font-size: 0.875rem;">
                        For urgent issues that require immediate attention, please contact our emergency hotline.
                    </p>
                    <div style="display: grid; gap: 1rem;">
                        <a href="tel:555-911-0000" class="btn" style="background: var(--danger); color: white; padding: 1rem 1.5rem;">
                            <i class="fas fa-phone"></i>
                            Emergency Hotline: (555) 911-0000
                        </a>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                            <a href="tel:911" class="btn btn-secondary">
                                <i class="fas fa-ambulance"></i>
                                Call 911
                            </a>
                            <a href="tel:555-123-4567" class="btn btn-secondary">
                                <i class="fas fa-shield-alt"></i>
                                Security: (555) 123-4567
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submit Request Form -->
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-edit"></i>
                    Submit Support Request
                </div>
                <div class="card-body">
                    <form>
                        <div class="form-group">
                            <label for="requestType">Type of Request</label>
                            <select id="requestType" class="form-control" required>
                                <option value="">Select request type...</option>
                                <option value="plumbing">Plumbing Issue</option>
                                <option value="electrical">Electrical Problem</option>
                                <option value="hvac">Heating/Air Conditioning</option>
                                <option value="appliance">Appliance Repair</option>
                                <option value="pest">Pest Control</option>
                                <option value="noise">Noise Complaint</option>
                                <option value="security">Security Issue</option>
                                <option value="general">General Maintenance</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="priority">Priority Level</label>
                            <select id="priority" class="form-control" required>
                                <option value="">Select priority...</option>
                                <option value="low">Low - Can wait a few days</option>
                                <option value="medium">Medium - Should be addressed soon</option>
                                <option value="high">High - Needs attention within 24 hours</option>
                                <option value="urgent">Urgent - Immediate response needed</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="location">Location in Unit</label>
                            <select id="location" class="form-control" required>
                                <option value="">Select location...</option>
                                <option value="kitchen">Kitchen</option>
                                <option value="bathroom">Bathroom</option>
                                <option value="living-room">Living Room</option>
                                <option value="bedroom">Bedroom</option>
                                <option value="balcony">Balcony/Patio</option>
                                <option value="laundry">Laundry Room</option>
                                <option value="storage">Storage Area</option>
                                <option value="hallway">Hallway</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="subject">Brief Description</label>
                            <input type="text" id="subject" class="form-control" 
                                   placeholder="e.g., Kitchen faucet is leaking" 
                                   required maxlength="100">
                            <small style="color: var(--gray-500); margin-top: 0.5rem; display: block;">
                                Keep it short - you can provide more details below
                            </small>
                        </div>

                        <div class="form-group">
                            <label for="description">Detailed Description</label>
                            <textarea id="description" class="form-control" rows="4" 
                                      placeholder="Please describe the issue in detail. Include when it started, what you've tried, and any other relevant information..."
                                      required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="access">Access Instructions</label>
                            <textarea id="access" class="form-control" rows="2" 
                                      placeholder="Let us know the best time to access your unit and any special instructions (e.g., 'Available weekday mornings, please call first')"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="contactMethod">Preferred Contact Method</label>
                            <select id="contactMethod" class="form-control">
                                <option value="phone">Phone Call</option>
                                <option value="email" selected>Email</option>
                                <option value="text">Text Message</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Attach Photos (Optional)</label>
                            <input type="file" class="form-control" accept="image/*" multiple>
                            <small style="color: var(--gray-500); margin-top: 0.5rem; display: block;">
                                Photos help our team understand the issue better. You can select multiple images.
                            </small>
                        </div>

                        <button type="submit" class="btn btn-primary btn-large btn-block">
                            <i class="fas fa-paper-plane"></i>
                            Submit Request
                        </button>
                    </form>
                </div>
            </div>

            <!-- My Open Requests -->
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-list"></i>
                    My Support Requests
                </div>
                <div class="card-body">
                    <div style="display: grid; gap: 1rem;">
                        <div style="padding: 1rem; border: 1px solid var(--gray-200); border-radius: var(--radius-lg); background: var(--gray-50);">
                            <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 0.75rem;">
                                <div style="flex: 1;">
                                    <h4 style="color: var(--gray-900); margin-bottom: 0.5rem; font-size: 1rem; font-weight: 600;">#2024-0234: Kitchen Faucet Leak</h4>
                                    <p style="color: var(--gray-600); margin: 0; font-size: 0.875rem;">
                                        Submitted: March 8, 2024 • Priority: Medium
                                    </p>
                                </div>
                                <span class="status open">In Progress</span>
                            </div>
                            <p style="color: var(--gray-600); margin-bottom: 1rem; font-size: 0.875rem;">
                                The kitchen faucet has been dripping constantly for the past two days. The leak appears to be coming from the base of the handle.
                            </p>
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;">
                                    <i class="fas fa-eye"></i> View Details
                                </button>
                                <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;">
                                    <i class="fas fa-comment"></i> Add Note
                                </button>
                            </div>
                        </div>

                        <div style="padding: 1rem; border: 1px solid var(--gray-200); border-radius: var(--radius-lg); background: var(--gray-50);">
                            <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 0.75rem;">
                                <div style="flex: 1;">
                                    <h4 style="color: var(--gray-900); margin-bottom: 0.5rem; font-size: 1rem; font-weight: 600;">#2024-0189: Air Conditioning Noise</h4>
                                    <p style="color: var(--gray-600); margin: 0; font-size: 0.875rem;">
                                        Submitted: March 3, 2024 • Priority: Low
                                    </p>
                                </div>
                                <span class="status pending">Scheduled</span>
                            </div>
                            <p style="color: var(--gray-600); margin-bottom: 1rem; font-size: 0.875rem;">
                                The AC unit is making unusual rattling sounds when it starts up. It's more noticeable in the evening.
                            </p>
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;">
                                    <i class="fas fa-eye"></i> View Details
                                </button>
                                <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.75rem;">
                                    <i class="fas fa-comment"></i> Add Note
                                </button>
                            </div>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button class="btn btn-secondary" onclick="viewAllRequests()">
                            <i class="fas fa-history"></i>
                            View All Request History
                        </button>
                    </div>
                </div>
            </div>

            <!-- Service Hours & Response Times -->
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-clock"></i>
                    Service Information
                </div>
                <div class="card-body">
                    <div style="display: grid; gap: 1.5rem;">
                        <div>
                            <h4 style="color: var(--gray-900); margin-bottom: 0.75rem; font-size: 1rem; font-weight: 600;">Business Hours</h4>
                            <div style="color: var(--gray-600); font-size: 0.875rem; line-height: 1.5;">
                                <p style="margin-bottom: 0.5rem;"><strong>Monday - Friday:</strong> 8:00 AM - 5:00 PM</p>
                                <p style="margin-bottom: 0.5rem;"><strong>Saturday:</strong> 9:00 AM - 2:00 PM</p>
                                <p style="margin: 0;"><strong>Sunday:</strong> Emergency calls only</p>
                            </div>
                        </div>

                        <div>
                            <h4 style="color: var(--gray-900); margin-bottom: 0.75rem; font-size: 1rem; font-weight: 600;">Response Times</h4>
                            <div style="display: grid; gap: 0.5rem;">
                                <div style="display: flex; justify-content: space-between; padding: 0.5rem; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span style="color: var(--gray-700); font-weight: 500;">Emergency</span>
                                    <span style="color: var(--danger); font-weight: 600;">Within 2 hours</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 0.5rem; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span style="color: var(--gray-700); font-weight: 500;">High Priority</span>
                                    <span style="color: var(--warning); font-weight: 600;">Same day</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 0.5rem; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span style="color: var(--gray-700); font-weight: 500;">Medium Priority</span>
                                    <span style="color: var(--info); font-weight: 600;">1-2 business days</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 0.5rem; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span style="color: var(--gray-700); font-weight: 500;">Low Priority</span>
                                    <span style="color: var(--secondary); font-weight: 600;">3-5 business days</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-headset"></i>
                    Contact Maintenance Team
                </div>
                <div class="card-body">
                    <p style="margin-bottom: 1.5rem; color: var(--gray-600); font-size: 0.875rem;">
                        Need to speak with someone directly? Our maintenance team is available during business hours.
                    </p>
                    <div style="display: grid; gap: 1rem;">
                        <a href="tel:555-123-4567" class="btn btn-primary btn-block">
                            <i class="fas fa-phone"></i>
                            Call Maintenance: (555) 123-4567
                        </a>
                        <a href="mailto:maintenance@membro.com" class="btn btn-secondary btn-block">
                            <i class="fas fa-envelope"></i>
                            Email: maintenance@membro.com
                        </a>
                    </div>
                </div>
            </div>
        </main>

        <!-- Mobile Navigation -->
        <nav class="mobile-nav">
            <ul class="mobile-nav-menu">
                <li class="mobile-nav-item">
                    <a href="dashboard.html" class="mobile-nav-link">
                        <i class="fas fa-home"></i>
                        Home
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="profile.html" class="mobile-nav-link">
                        <i class="fas fa-user"></i>
                        Profile
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="announcements.html" class="mobile-nav-link">
                        <i class="fas fa-bullhorn"></i>
                        News
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="billing.html" class="mobile-nav-link">
                        <i class="fas fa-credit-card"></i>
                        Billing
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="services.html" class="mobile-nav-link">
                        <i class="fa fa-calendar"></i>
                        Services
                    </a>
                </li>
                <li class="mobile-nav-item mobile-nav-more">
                    <button class="mobile-nav-link" onclick="toggleMobileMore()">
                        <i class="fas fa-ellipsis-h"></i>
                        More
                    </button>
                    <div class="mobile-nav-dropdown" id="mobileMoreDropdown">
                        <a href="properties.html" class="mobile-nav-dropdown-item">
                            <i class="fas fa-key"></i>
                            Properties
                        </a>
                        <a href="household.html" class="mobile-nav-dropdown-item">
                            <i class="fas fa-users"></i>
                            Household
                        </a>
                        <a href="complaints.html" class="mobile-nav-dropdown-item active">
                            <i class="fas fa-tools"></i>
                            Request Support
                        </a>
                    </div>
                </li>
            </ul>
        </nav>
    </div>

    <script>
         // Notification Modal Functions
         function toggleNotifications() {
            const modal = document.getElementById('notificationModal');
            modal.classList.toggle('active');
        }

        function closeNotifications() {
            const modal = document.getElementById('notificationModal');
            modal.classList.remove('active');
        }

        function switchTab(tab) {
            // Remove active class from all tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Filter notifications based on tab
            const notifications = document.querySelectorAll('.notification-item');
            notifications.forEach(item => {
                if (tab === 'all') {
                    item.style.display = 'flex';
                } else if (tab === 'mentions') {
                    // Show only comment/mention type notifications
                    if (item.dataset.type === 'comment' || item.dataset.type === 'follow') {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                }
            });
        }

        function markAllAsRead() {
            // Remove unread class from all notifications
            document.querySelectorAll('.notification-item.unread').forEach(item => {
                item.classList.remove('unread');
            });
            
            // Update notification badge
            const badge = document.querySelector('.notification-badge');
            badge.textContent = '0';
            badge.style.display = 'none';
            
            // Show success message
            showToast('All notifications marked as read');
        }

        function viewAllNotifications() {
            // This would typically navigate to a dedicated notifications page
            showToast('Opening full notifications page...');
            // window.location.href = 'notifications.html';
        }

        function showToast(message) {
            // Create and show a toast notification
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: var(--primary);
                color: white;
                padding: 12px 24px;
                border-radius: 8px;
                z-index: 10000;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            document.body.appendChild(toast);
            
            // Fade in
            setTimeout(() => {
                toast.style.opacity = '1';
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }

        // Close notification modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('notificationModal');
            const notificationBtn = document.querySelector('.notification-btn');
            
            if (modal.classList.contains('active') && 
                !modal.contains(event.target) &&
                !notificationBtn.contains(event.target)) {
                closeNotifications();
            }
        });

        // Close notification modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeNotifications();
            }
        });

        // Mark individual notifications as read when clicked
        document.querySelectorAll('.notification-item').forEach(item => {
            item.addEventListener('click', function() {
                if (this.classList.contains('unread')) {
                    this.classList.remove('unread');
                    updateNotificationBadge();
                }
            });
        });

        function updateNotificationBadge() {
            const unreadCount = document.querySelectorAll('.notification-item.unread').length;
            const badge = document.querySelector('.notification-badge');
            
            if (unreadCount > 0) {
                badge.textContent = unreadCount;
                badge.style.display = 'block';
            } else {
                badge.style.display = 'none';
            }
        }

        // Mobile More Dropdown Functions
        function toggleMobileMore() {
            const dropdown = document.getElementById('mobileMoreDropdown');
            dropdown.classList.toggle('active');
        }

        // Close mobile more dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('mobileMoreDropdown');
            const moreButton = document.querySelector('.mobile-nav-more .mobile-nav-link');
            
            if (dropdown.classList.contains('active') && 
                !dropdown.contains(event.target) &&
                !moreButton.contains(event.target)) {
                dropdown.classList.remove('active');
            }
        });

        // Close mobile more dropdown with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const dropdown = document.getElementById('mobileMoreDropdown');
                dropdown.classList.remove('active');
            }
        });
        // Mobile More Dropdown Functions
        function toggleMobileMore() {
            const dropdown = document.getElementById('mobileMoreDropdown');
            dropdown.classList.toggle('active');
        }

        // Close mobile more dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('mobileMoreDropdown');
            const moreButton = document.querySelector('.mobile-nav-more .mobile-nav-link');
            
            if (dropdown && dropdown.classList.contains('active') && 
                !dropdown.contains(event.target) &&
                !moreButton.contains(event.target)) {
                dropdown.classList.remove('active');
            }
        });

        // Close mobile more dropdown with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const dropdown = document.getElementById('mobileMoreDropdown');
                if (dropdown) {
                    dropdown.classList.remove('active');
                }
            }
        });

        // Pagination variables for complaints
        var currentComplaintsPage = 1;
        var complaintsItemsPerPage = 5;
        var allComplaints = [];

        // Sample complaints data
        var sampleComplaints = [
            {
                id: '2024-0234',
                title: 'Kitchen Faucet Leak',
                description: 'The kitchen faucet has been dripping constantly for the past two days. The leak appears to be coming from the base of the handle.',
                type: 'plumbing',
                priority: 'medium',
                status: 'in-progress',
                submittedDate: '2024-03-08',
                location: 'kitchen',
                assignedTo: 'John Smith',
                lastUpdate: '2024-03-10'
            },
            {
                id: '2024-0189',
                title: 'Air Conditioning Noise',
                description: 'The AC unit is making unusual rattling sounds when it starts up. It\'s more noticeable in the evening.',
                type: 'hvac',
                priority: 'low',
                status: 'scheduled',
                submittedDate: '2024-03-03',
                location: 'living-room',
                assignedTo: 'Mike Johnson',
                lastUpdate: '2024-03-05'
            },
            {
                id: '2024-0156',
                title: 'Electrical Outlet Not Working',
                description: 'The outlet in the bedroom stopped working yesterday. No power to any devices plugged into it.',
                type: 'electrical',
                priority: 'high',
                status: 'completed',
                submittedDate: '2024-02-28',
                location: 'bedroom',
                assignedTo: 'Sarah Wilson',
                lastUpdate: '2024-03-01'
            },
            {
                id: '2024-0123',
                title: 'Pest Control - Ants in Kitchen',
                description: 'Noticed ants coming from under the kitchen cabinets. They seem to be attracted to food crumbs.',
                type: 'pest',
                priority: 'medium',
                status: 'completed',
                submittedDate: '2024-02-20',
                location: 'kitchen',
                assignedTo: 'Pest Control Team',
                lastUpdate: '2024-02-25'
            },
            {
                id: '2024-0098',
                title: 'Refrigerator Not Cooling Properly',
                description: 'The refrigerator is not maintaining proper temperature. Food is spoiling faster than usual.',
                type: 'appliance',
                priority: 'high',
                status: 'in-progress',
                submittedDate: '2024-02-15',
                location: 'kitchen',
                assignedTo: 'Appliance Tech',
                lastUpdate: '2024-02-18'
            },
            {
                id: '2024-0076',
                title: 'Balcony Door Sticking',
                description: 'The sliding door to the balcony is difficult to open and close. It feels like it\'s rubbing against the frame.',
                type: 'general',
                priority: 'low',
                status: 'scheduled',
                submittedDate: '2024-02-10',
                location: 'balcony',
                assignedTo: 'General Maintenance',
                lastUpdate: '2024-02-12'
            },
            {
                id: '2024-0054',
                title: 'Noise Complaint - Upstairs Neighbor',
                description: 'Excessive noise from upstairs unit, especially late at night. Sounds like furniture being moved.',
                type: 'noise',
                priority: 'medium',
                status: 'resolved',
                submittedDate: '2024-02-05',
                location: 'other',
                assignedTo: 'Property Manager',
                lastUpdate: '2024-02-08'
            },
            {
                id: '2024-0032',
                title: 'Security Light Out',
                description: 'The security light in the parking area is not working. Makes it difficult to see at night.',
                type: 'security',
                priority: 'medium',
                status: 'completed',
                submittedDate: '2024-01-30',
                location: 'other',
                assignedTo: 'Security Team',
                lastUpdate: '2024-02-02'
            }
        ];

        function viewAllRequests() {
            // Show full complaints history modal
            showAllRequestsModal();
        }

        function showAllRequestsModal() {
            // Create modal for full complaints history
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
            `;

            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                border-radius: 12px;
                max-width: 900px;
                width: 90%;
                max-height: 80vh;
                overflow-y: auto;
                position: relative;
            `;

            allComplaints = sampleComplaints;

            modalContent.innerHTML = `
                <div style="padding: 1.5rem; border-bottom: 1px solid var(--gray-200); display: flex; justify-content: space-between; align-items: center;">
                    <h3 style="margin: 0; color: var(--gray-900);">Complete Request History</h3>
                    <button onclick="closeAllRequestsModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--gray-500);">&times;</button>
                </div>
                
                <div style="padding: 1.5rem;">
                    <!-- Filter and Pagination Controls -->
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <span style="font-weight: 600; color: var(--gray-700);">Items per page:</span>
                            <select id="complaintsItemsPerPage" onchange="changeComplaintsItemsPerPage()" style="padding: 0.5rem; border: 1px solid var(--gray-300); border-radius: 6px; background: white;">
                                <option value="5" selected>5</option>
                                <option value="10">10</option>
                                <option value="20">20</option>
                                <option value="50">50</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <span style="font-weight: 600; color: var(--gray-700);">Filter by:</span>
                            <select id="complaintsStatusFilter" onchange="filterComplaints()" style="padding: 0.5rem; border: 1px solid var(--gray-300); border-radius: 6px; background: white;">
                                <option value="all">All Status</option>
                                <option value="open">Open</option>
                                <option value="in-progress">In Progress</option>
                                <option value="scheduled">Scheduled</option>
                                <option value="completed">Completed</option>
                                <option value="resolved">Resolved</option>
                            </select>
                            
                            <select id="complaintsTypeFilter" onchange="filterComplaints()" style="padding: 0.5rem; border: 1px solid var(--gray-300); border-radius: 6px; background: white;">
                                <option value="all">All Types</option>
                                <option value="plumbing">Plumbing</option>
                                <option value="electrical">Electrical</option>
                                <option value="hvac">HVAC</option>
                                <option value="appliance">Appliance</option>
                                <option value="pest">Pest Control</option>
                                <option value="noise">Noise</option>
                                <option value="security">Security</option>
                                <option value="general">General</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Complaints List -->
                    <div id="allComplaintsList" style="margin-bottom: 1.5rem;">
                        <!-- Complaints will be loaded here -->
                    </div>
                    
                    <!-- Pagination Controls -->
                    <div id="complaintsPaginationControls" style="display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                        <button id="complaintsPrevPage" class="pagination-btn" onclick="complaintsPreviousPage()" disabled>
                            <i class="fas fa-chevron-left"></i>
                            Previous
                        </button>
                        
                        <div id="complaintsPageNumbers" style="display: flex; gap: 0.5rem;">
                            <!-- Page numbers will be generated here -->
                        </div>
                        
                        <button id="complaintsNextPage" class="pagination-btn" onclick="complaintsNextPage()">
                            Next
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    
                    <!-- Page Info -->
                    <div id="complaintsPageInfo" style="text-align: center; margin-top: 1rem; color: var(--gray-600); font-size: 0.875rem;">
                        <!-- Page info will be displayed here -->
                    </div>
                    
                    <!-- Action Buttons -->
                    <div style="display: flex; justify-content: center; gap: 1rem; margin-top: 2rem;">
                        <button class="btn btn-secondary" onclick="exportAllComplaints()">
                            <i class="fas fa-download"></i>
                            Export All to CSV
                        </button>
                        <button class="btn btn-primary" onclick="closeAllRequestsModal()">
                            Close
                        </button>
                    </div>
                </div>
            `;

            modal.appendChild(modalContent);
            document.body.appendChild(modal);

            // Load initial data
            loadAllComplaintsView();
        }

        function closeAllRequestsModal() {
            const modal = document.querySelector('.modal.active');
            if (modal) {
                modal.remove();
            }
        }

        function loadAllComplaintsView() {
            const startIndex = (currentComplaintsPage - 1) * complaintsItemsPerPage;
            const endIndex = startIndex + complaintsItemsPerPage;
            const currentComplaints = allComplaints.slice(startIndex, endIndex);
            
            const complaintsList = document.getElementById('allComplaintsList');
            
            if (currentComplaints.length === 0) {
                complaintsList.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--gray-500);">No requests found.</div>';
            } else {
                complaintsList.innerHTML = currentComplaints.map(complaint => createAllComplaintsItem(complaint)).join('');
            }
            
            updateComplaintsPagination();
            updateComplaintsPageInfo();
        }

        function createAllComplaintsItem(complaint) {
            const statusColors = {
                'open': 'var(--warning)',
                'in-progress': 'var(--primary)',
                'scheduled': 'var(--info)',
                'completed': 'var(--secondary)',
                'resolved': 'var(--success)'
            };
            
            const statusLabels = {
                'open': 'Open',
                'in-progress': 'In Progress',
                'scheduled': 'Scheduled',
                'completed': 'Completed',
                'resolved': 'Resolved'
            };
            
            const typeLabels = {
                'plumbing': 'Plumbing',
                'electrical': 'Electrical',
                'hvac': 'HVAC',
                'appliance': 'Appliance',
                'pest': 'Pest Control',
                'noise': 'Noise',
                'security': 'Security',
                'general': 'General'
            };
            
            const priorityColors = {
                'low': 'var(--secondary)',
                'medium': 'var(--warning)',
                'high': 'var(--danger)',
                'urgent': 'var(--danger)'
            };
            
            return `
                <div class="complaint-item" data-type="${complaint.type}" data-status="${complaint.status}" style="display: flex; justify-content: space-between; align-items: start; padding: 1.5rem; background: var(--gray-50); border-radius: var(--radius-md); margin-bottom: 1rem; border-left: 4px solid ${statusColors[complaint.status]};">
                    <div style="flex: 1;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <h4 style="color: var(--gray-900); margin: 0; font-size: 1rem; font-weight: 600;">#${complaint.id}: ${complaint.title}</h4>
                            <span style="padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; background: ${priorityColors[complaint.priority]}; color: white;">${complaint.priority.toUpperCase()}</span>
                        </div>
                        <p style="color: var(--gray-600); margin: 0 0 0.5rem 0; font-size: 0.875rem;">${complaint.description}</p>
                        <div style="display: flex; align-items: center; gap: 1rem; font-size: 0.75rem; color: var(--gray-500);">
                            <span><i class="fas fa-calendar"></i> Submitted: ${formatDate(complaint.submittedDate)}</span>
                            <span><i class="fas fa-map-marker-alt"></i> ${complaint.location.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</span>
                            <span><i class="fas fa-user"></i> ${complaint.assignedTo}</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
                            <span class="payment-type-badge ${complaint.type}">${typeLabels[complaint.type]}</span>
                            <span style="color: var(--gray-500); font-size: 0.75rem;">Last update: ${formatDate(complaint.lastUpdate)}</span>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <span class="status ${complaint.status}" style="padding: 0.5rem 1rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; background: ${statusColors[complaint.status]}; color: white;">${statusLabels[complaint.status]}</span>
                    </div>
                </div>
            `;
        }

        function updateComplaintsPagination() {
            const totalPages = Math.ceil(allComplaints.length / complaintsItemsPerPage);
            const pageNumbers = document.getElementById('complaintsPageNumbers');
            const prevBtn = document.getElementById('complaintsPrevPage');
            const nextBtn = document.getElementById('complaintsNextPage');
            
            // Update previous/next buttons
            prevBtn.disabled = currentComplaintsPage === 1;
            nextBtn.disabled = currentComplaintsPage === totalPages;
            
            // Generate page numbers
            let pageNumbersHTML = '';
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentComplaintsPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            for (let i = startPage; i <= endPage; i++) {
                pageNumbersHTML += `
                    <button class="page-number ${i === currentComplaintsPage ? 'active' : ''}" onclick="complaintsGoToPage(${i})" style="padding: 0.5rem 0.75rem; border: 1px solid var(--gray-300); background: var(--white); color: var(--gray-700); border-radius: 6px; font-weight: 500; cursor: pointer; transition: all 0.2s ease; font-size: 0.875rem;">
                        ${i}
                    </button>
                `;
            }
            
            pageNumbers.innerHTML = pageNumbersHTML;
        }

        function updateComplaintsPageInfo() {
            const totalItems = allComplaints.length;
            const startIndex = (currentComplaintsPage - 1) * complaintsItemsPerPage + 1;
            const endIndex = Math.min(currentComplaintsPage * complaintsItemsPerPage, totalItems);
            const totalPages = Math.ceil(totalItems / complaintsItemsPerPage);
            
            document.getElementById('complaintsPageInfo').innerHTML = `
                Showing ${startIndex}-${endIndex} of ${totalItems} requests (Page ${currentComplaintsPage} of ${totalPages})
            `;
        }

        function complaintsPreviousPage() {
            if (currentComplaintsPage > 1) {
                currentComplaintsPage--;
                loadAllComplaintsView();
            }
        }

        function complaintsNextPage() {
            const totalPages = Math.ceil(allComplaints.length / complaintsItemsPerPage);
            if (currentComplaintsPage < totalPages) {
                currentComplaintsPage++;
                loadAllComplaintsView();
            }
        }

        function complaintsGoToPage(page) {
            currentComplaintsPage = page;
            loadAllComplaintsView();
        }

        function changeComplaintsItemsPerPage() {
            complaintsItemsPerPage = parseInt(document.getElementById('complaintsItemsPerPage').value);
            currentComplaintsPage = 1; // Reset to first page
            loadAllComplaintsView();
        }

        function filterComplaints() {
            const statusFilter = document.getElementById('complaintsStatusFilter').value;
            const typeFilter = document.getElementById('complaintsTypeFilter').value;
            
            allComplaints = sampleComplaints.filter(complaint => {
                const statusMatch = statusFilter === 'all' || complaint.status === statusFilter;
                const typeMatch = typeFilter === 'all' || complaint.type === typeFilter;
                return statusMatch && typeMatch;
            });
            
            currentComplaintsPage = 1; // Reset to first page
            loadAllComplaintsView();
        }

        function exportAllComplaints() {
            var csvContent = 'ID,Title,Type,Priority,Status,Submitted Date,Location,Assigned To,Last Update\n';
            
            allComplaints.forEach(function(complaint) {
                csvContent += `${complaint.id},"${complaint.title}",${complaint.type},${complaint.priority},${complaint.status},${complaint.submittedDate},${complaint.location},${complaint.assignedTo},${complaint.lastUpdate}\n`;
            });
            
            // Create and download CSV file
            var blob = new Blob([csvContent], { type: 'text/csv' });
            var url = window.URL.createObjectURL(blob);
            var link = document.createElement('a');
            link.href = url;
            link.download = 'complete-request-history.csv';
            link.click();
            window.URL.revokeObjectURL(url);
            
            showToast('Complete request history exported successfully!');
        }

        function formatDate(dateString) {
            var date = new Date(dateString);
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }
    </script>
</body>
</html> 